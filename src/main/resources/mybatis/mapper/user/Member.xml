<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.springboot.member.UserMapper">


    <!--  회원가입  -->
    <insert id="insertUser" 
    	parameterType="com.project.springboot.member.UserDTO">
        INSERT INTO USER_INFO
        (u_num, u_id, u_pw, u_name, u_nick, u_phone, u_email, u_zip, u_addr1, u_addr2, u_type)
        VALUES(seq_user_num.nextval,#{u_id},#{u_pw},#{u_name},#{u_nick},#{u_phone},
        		#{u_email},#{u_zip},#{u_addr1},#{u_addr2},'일반')
    </insert>
    
    
    <!-- 회원정보 수정 -->
	<update id="updateUser" parameterType="com.project.springboot.member.UserDTO">
	   <choose>
			<when test = "#{u_pw} != null">
				UPDATE USER_INFO SET
			    u_pw = #{u_pw},
			    u_nick = #{u_nick},
			    u_phone = #{u_phone},
			    u_email = #{u_email},
			    u_zip = #{u_zip},
			    u_addr1 = #{u_addr1},
			    u_addr2 = #{u_addr2}
			    WHERE u_id = #{u_id}
			</when>
			<otherwise>
				UPDATE USER_INFO SET
				    u_nick = #{u_nick},
				    u_phone = #{u_phone},
				    u_email = #{u_email},
				    U_Zip = #{u_zip},
				    u_addr1 = #{u_addr1},
				    u_addr2 = #{u_addr2}
				    WHERE u_id = #{u_id}
			</otherwise>
		</choose>
	</update>

    <!-- 회원탈퇴 -->
	<delete id="deleteUser" parameterType="String">
	    DELETE FROM USER_INFO WHERE u_id = #{u_id}
	</delete>
	
	<select id="selectOne" resultType="com.project.springboot.member.UserDTO">
		SELECT * FROM USER_INFO WHERE u_id = #{param1}
	</select>
</mapper> 